const fs = require("fs");
const path = require("path");

// Directorios comunes donde se buscan certificados
const pathsToWatch = [
  "/etc/ssl/certs/",
  "/usr/local/share/ca-certificates/",
  "/usr/local/etc/openssl/cert.pem",
  "/System/Library/Keychains/SystemRootCertificates.keychain",
  process.env.NODE_EXTRA_CA_CERTS, // La variable de entorno que configuraste
  require("os").homedir() + "/.certs/",
];

// Monitorear accesos a certificados
pathsToWatch.forEach((dir) => {
  if (dir && fs.existsSync(dir)) {
    console.log(`📡 Monitoreando archivos en: ${dir}`);
    fs.watch(dir, (eventType, filename) => {
      console.log(`🔍 Archivo accedido: ${path.join(dir, filename)} (${eventType})`);
    });
  }
});

console.log("👀 Monitoreo iniciado. Ahora ejecuta `npm install` o `pnpm install`.");

setInterval(() => {}, 1000 * 60); // Mantiene el script activo
